this 2.2 patch currently fails to apply, TODO: fix it and make a new patch for 3.1
